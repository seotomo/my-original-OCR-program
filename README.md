# 自作OCRプログラムの作成

## 目的
既存のOCRソフトは数多くあるが、日本語の文字認識は非常に難しいと言われている。理由として①ひらがな・カタカナに似た文字が多い、②「け」や「は」など独立した複数の画から構成される文字が多い、などが挙げられる。特に手書き文字の認識では精度が低いと言われる。そこで手書き文字に対応したOCRを自作し、既存のものと比べどこまで精度が出せるかを試してみた。

## 対応文書
1.	スキャンされた手書き文字
2.	スキャンされた印刷文字   
      の2種類。現状**横書き**のみ対応している。
      
例)  
<img src="/images/ocr_images/スキャンされた手書き文字.jpg" width = "500"> <img src="/images/ocr_images/スキャンされた印刷文字.jpg" width = "500">
 &emsp;       &emsp;　   　　__スキャンされた手書き文字__　　　　　　　　　　　　　　　　　　　　　　__スキャンされた印刷文字__    
 
 
 
 
## OCRプログラムファイル名：ocr/my_ocr.py
処理は大きく分けて①文字抽出、②文字予測の2つに分かれている。

### ①文字抽出
1. 前処理    
1) ファイル読み込み  
<img src="/images/ocr_images/ファイル読み込み.jpg" width = "700">  
文書の形式のみ手動で選択する。  

2) 直線除去  
<img src="/images/ocr_images/直線除去.jpg" width = "500">  
**RemoveLinesFromImage関数**により直線除去を行う。
処理内容はソーベルフィルタにより縦もしくは横方向にエッジ強調を行い、作成したエッジ強調画像に対しラベリング処理をかけ、ラベルの縦横比が15以上であれば線と判定し、除去を行う。この処理は縦方向・横方向に2回かけ、両方向の直線に対応させる。


<img src="/images/ocr_images/直線除去_前.jpg" width = "300"> <img src="/images/ocr_images/直線除去_ソーベルフィルタ.jpg" width = "300">　<img src="/images/ocr_images/直線除去_後.jpg" width = "300">
 
 
 
 
 
